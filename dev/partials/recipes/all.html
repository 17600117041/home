<!--
		Copyright 2013 Joshua Marsh. All rights reserved.
		Use of this source code is governed by a BSD-style
		license that can be found in the LICENSE file.
	-->
<div class="row">
	<div class="span6 offset3">
		<h1>Recipes</h1>
		<table class="table table-striped table-hover">
			<thead>
				<tr>
					<th>
						<div class="pull-left">Name</div>
						<div class="pull-right">
							<a role="button" class="btn btn-success pull-right" 
											href="#newModal" data-toggle="modal">
								<i class="icon-plus icon-white"></i>
								New
							</a>
						</div>
					</th>
				</tr>
			</thead>
			<tbody>
				<!-- Loop through each of the recipes. -->
				<tr data-ng-repeat="recipe in recipes">
					<td>
						<div class="pull-right">
							<a role="button" class="btn btn-warning"
								 href="#copyModal" data-toggle="modal"
								 data-ng-click="setcopy(recipe.Key, recipe.Name)">
								<i class="icon-file icon-white"></i>
								Copy
							</a>
							<a role="button" class="btn btn-danger" 
								 href="#deleteModal" data-toggle="modal"
								 data-ng-click="del($index, recipe.Key)">
								<i class="icon-remove icon-white"></i>
								Delete
							</a>
						</div>
						<div><a href="#/recipes/view/{{recipe.Key}}">{{recipe.Name}}</a></div>
					</td>
				</tr>
				<tr data-ng-show="recipes.length == 0">
					<td colspan="3">There are no recipes.</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>

<!-- This is the modal that pops up when the copy button is
pressed. -->
<form name="copyrecipe">
	<div data-modal 
			 data-modal-id="copyModal"
			 data-modal-title="Copy Recipe"
			 data-modal-message="Copy an existing recipe."
			 data-modal-ok-button-class="btn-primary"
			 data-modal-ok-button-text="Copy"
			 data-modal-ok-button-icon="icon-file icon-white"
			 data-modal-data="data"
			 data-modal-form="copyrecipe"
			 data-modal-on-ok="copy()">
		<div class="control-group"
				 data-ng-class="{error: copyrecipe.name.$invalid}">
			<label>Name</label>
			<input type="text" name="name" data-ng-model="data.name" required>
			<span data-ng-show="copyrecipe.name.$error.required" class="help-inline">
				Required
			</span>
		</div>
	</div>
</form>

<!-- This is the modal that pops up when the new button is
pressed. -->
<form name="newrecipe">
	<div data-modal 
			 data-modal-id="newModal"
			 data-modal-title="New Recipe"
			 data-modal-message="Create a new recipe."
			 data-modal-ok-button-class="btn-primary"
			 data-modal-ok-button-text="Create"
			 data-modal-ok-button-icon="icon-hdd icon-white"
			 data-modal-data="data"
			 data-modal-form="newrecipe"
			 data-modal-on-ok="save()">
		<div class="control-group"
				 data-ng-class="{error: newrecipe.name.$invalid}">
			<label>Name</label>
			<input type="text" name="name" data-ng-model="data.name" required>
			<span data-ng-show="newrecipe.name.$error.required" class="help-inline">
				Required
			</span>
		</div>
		<div class="control-group"
				 data-ng-class="{error: newrecipe.URL.$invalid}">
			<label>URL</label>
			<input type="text" name="URL" data-ng-model="data.URL">
		</div>
	</div>
	</div>
</form>

<!-- This is the modal that pops up when the delete button is
pressed. -->
<div data-modal 
		 data-modal-id="deleteModal"
		 data-modal-title="Are You Sure?"
		 data-modal-message="Are you sure you want to delete this recipe?"
		 data-modal-ok-button-class="btn-danger"
		 data-modal-ok-button-text="Delete"
		 data-modal-ok-button-icon="icon-remove icon-white"
		 data-modal-on-ok="sure()"></div>
