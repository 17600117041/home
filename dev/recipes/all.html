<!--
		Copyright 2013 Joshua Marsh. All rights reserved.
		Use of this source code is governed by a BSD-style
		license that can be found in the LICENSE file.
	-->
<div class="row">
	<div class="span6 offset3">
		<h1>Recipes</h1>
		<table class="table table-striped table-hover">
			<thead>
				<tr>
					<th>
						<div class="pull-left">Name</div>
						<div class="pull-right">
							<a role="button" class="btn btn-success pull-right" 
											href="#newModal" data-toggle="modal">
								<i class="icon-plus icon-white"></i>
								New
							</a>
						</div>
					</th>
				</tr>
			</thead>
			<tbody>
				<!-- Loop through each of the recipes. -->
				<tr data-ng-repeat="recipe in recipes">
					<td>
						<div class="pull-right">
							<a role="button" class="btn btn-warning"
								 href="#copyModal" data-toggle="modal"
								 data-ng-click="setcopy(recipe.Key, recipe.Name)">
								<i class="icon-file icon-white"></i>
								Copy
							</a>
							<a role="button" class="btn btn-danger" 
								 href="#deleteModal" data-toggle="modal"
								 data-ng-click="del($index, recipe.Key)">
								<i class="icon-remove icon-white"></i>
								Delete
							</a>
						</div>
						<div><a href="#/recipes/view/{{recipe.Key}}">{{recipe.Name}}</a></div>
					</td>
				</tr>
				<tr data-ng-show="recipes.length == 0">
					<td colspan="3">There are no recipes.</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>

<!-- This is the modal that pops up when the copy button is
pressed. -->
<div id="copyModal" class="modal hide">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" 
						aria-hidden="true">&times;</button>
    <h3>Copy Recipe</h3>
  </div>
  <div class="modal-body">
		<form name="copyrecipe">
			<div class="control-group"
					 data-ng-class="{error: copyrecipe.copyName.$invalid}">
				<label>Name</label>
				<input type="text" name="copyName" data-ng-model="copyName" required>
				<span data-ng-show="copyrecipe.copyName.$error.required" 
							class="help-inline">
					Required
				</span>
			</div>
		</form>
  </div>
  <div class="modal-footer">
		<button class="btn" data-dismiss="modal" aria-hidden="true">
			<i class="icon-remove-sign"></i>
			Cancel
		</button>
		<button data-ng-click="copy()" data-ng-disabled="copyrecipe.$invalid"
						data-dismiss="modal" aria-hidden="true"
						class="btn btn-primary">
			<i class="icon-file icon-white"></i>
			Copy
		</button>
  </div>
</div>

<form name="newrecipe">
	<div id="newModal" class="modal hide">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			<h3>New Recipe</h3>
		</div>
		<div class="modal-body">
			<div class="control-group"
					 ata-ng-class="{error: newrecipe.name.$invalid}">
				<label>Name</label>
				<input type="text" name="name" data-ng-model="name" required>
				<span data-ng-show="newrecipe.name.$error.required" class="help-inline">
					Required
				</span>
			</div>
			<div class="control-group"
					 ata-ng-class="{error: newrecipe.URL.$invalid}">
				<label>URL</label>
				<input type="text" name="URL" data-ng-model="URL">
			</div>
		</div>
		<div class="modal-footer">
			<button data-ng-click="save()" 
							data-dismiss="modal" aria-hidden="true" 
							data-ng-disabled="newrecipe.$invalid"
							class="btn btn-primary pull-right">
				<i class="icon-hdd icon-white"></i>
				Create
			</button>
			<button data-dismiss="modal" aria-hidden="true" class="btn pull-right">
				<i class="icon-remove-sign"></i>
				Cancel
			</button>
		</div>
	</div>
</form>

<!-- This is the modal that pops up when the delete button is
pressed. -->
<div id="deleteModal" class="modal hide">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Are You Sure?</h3>
  </div>
  <div class="modal-body">
    <p>Are you sure you want to delete this recipe?</p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">
			<i class="icon-remove-sign"></i>
			Cancel
		</button>
    <button class="btn btn-danger"
						data-dismiss="modal" aria-hidden="true"
						data-ng-click="sure()">
			<i class="icon-remove icon-white"></i>
			Delete
		</button>
  </div>
</div>
